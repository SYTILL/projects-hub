<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p5.js with Matter.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.17.1/matter.min.js"></script>
    <style>
        .container {
            height: 100vh;
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
        }

        #canv {
            position: relative;
            border: 1px solid black;
            margin: 40px;
            width: 900px;
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #overlay-box {
            position: absolute;
            width: 80px;
            height: 80px;
            background-color: blue;
            opacity: 0.5;
        }
    </style>
</head>

<body>
    <div class="container">
        <div id="canv"></div>
    </div>
    <script>
        let engine = Matter.Engine.create();
        let world = engine.world;

        let render = Matter.Render.create({
            element: document.getElementById('canv'),
            engine: engine,
        });

        let ground = Matter.Bodies.rectangle(400, 600, 810, 60, { isStatic: true });
        let boxA = Matter.Bodies.rectangle(400, 200, 80, 80);
        let boxB = Matter.Bodies.rectangle(450, 50, 80, 80);

        Matter.World.add(world, [boxA, boxB, ground]);
        Matter.Engine.run(engine);
        Matter.Render.run(render);

        // Create and append overlay box
        let overlayBox = document.createElement('div');
        overlayBox.setAttribute('id', 'overlay-box');
        document.getElementById('canv').appendChild(overlayBox);

        // Update and position overlay box
        function updateOverlayBox() {
            let position = boxA.position;
            let angle = boxA.angle;

            overlayBox.style.left = (position.x - 40) + 'px'; // Adjust position (centering the box)
            overlayBox.style.top = (position.y - 40) + 'px';
            overlayBox.style.transform = `rotate(${angle}rad)`; // Update rotation

            requestAnimationFrame(updateOverlayBox);
        }

        updateOverlayBox(); // Call the function to start updating the overlay box
    </script>
</body>

</html>